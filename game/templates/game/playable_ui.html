

{% load staticfiles %}
<html>
  <head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="XOdia 18">
  <meta name="author" content="PISB XOdia team">
  <title>XOdia '18</title>
  <!-- Favicon -->
  <link href="{% static 'game/xodialogo2.png' %}" rel="icon" type="image/png">
  <!-- Fonts -->
  <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700" rel="stylesheet">
  <!-- Icons -->
  <link href ="{% static 'assets/vendor/nucleo/css/nucleo.css' %}" rel="stylesheet">
  <link href="{% static 'assets/vendor/font-awesome/css/font-awesome.min.css' %}" rel="stylesheet">
  <!-- Argon CSS -->
  <link type="text/css" href="{% static 'assets/css/argon.css' %}" rel="stylesheet">
  <!-- Docs CSS -->
  <link type="text/css" href="{% static 'assets/css/argon.min.css' %}" rel="stylesheet">
    <link href='https://fonts.googleapis.com/css?family=Montserrat' rel='stylesheet'>


    <style>

     .nav-item > .nav-link{
            font-size: 1.1rem;
        }
        .navdesign{

        background-color: rgba(0,0,0,0.5);
        color:white;

    }


      body {
   position: relative;

   margin: 0;
   background-image: url("{% static 'game/bg11.jpg' %}");

   background-color: black;
   background-attachment: fixed;
   min-height: 100vh;
   min-width:100%;
   background-position: top;
   background-repeat: no-repeat;
   background-size: cover;
    -webkit-background-size: cover;
    -moz-background-size: cover;

}

        .phone{
            display:block;
            margin-top:0px;
            margin-left:100px;
        }
        
        
        
         @media only screen and (min-width: 1023px)and (max-width: 1200px){
            .phone{
            display:block;
            margin-top:600px;
            padding:50px;
            width:900px;
            margin-left: 0px;
            transform: translateX(-500px);
            
            }

            .navdesign{

        background-color: rgba(0,0,0,0.5);
        color:white;
        min-width:700px;

    }



        }


        @media only screen and (max-width: 1100px){
            .phone{
            display:block;
            margin-top:600px;
            padding:50px;
            width:900px;
            margin-left: 0px;
            
            }

            .navdesign{

        background-color: rgba(0,0,0,0.5);
        color:white;
        min-width:930px;

    }



        }






    </style>
  </head>
  <body>

  <nav class="navbar navbar-expand-lg navbar-dark navdesign fixed" style="font-family: 'Montserrat';">
        <div class="container-fluid">
            {% if au %}
          <a  href="{% url 'game:postlogin' %}"><img src="{% static 'game/xodiawhitelogo.txt' %}"   alt="XOdia" class="img-fluid" style="height:2.5rem;" ></a>
            {% endif %}
            {% if not au %}
            <a  href="{% url 'game:login' %}"><img src="{% static 'game/xodiawhitelogo.txt' %}"   alt="XOdia" class="img-fluid" style="height:2.5rem;" ></a>
            {% endif %}
          <button class="navbar-toggler collapsed" type="button" data-toggle="collapse" data-target="#myNavbar" aria-controls="navbar-dark" aria-expanded="false" aria-label="Toggle navigation" style="">
            <span class="navbar-toggler-icon"></span>
          </button>
          <div class="navbar-collapse collapse" id="myNavbar">
            <div class="navbar-collapse-header">
              <div class="row">
                <div class="col-6 collapse-brand text-dark" >
                  XOdia '18
                </div>
                <div class="col-6 collapse-close">
                  <button type="button" class="navbar-toggler collapsed" data-toggle="collapse" data-target="#myNavbar" aria-controls="navbar-dark" aria-expanded="false" aria-label="Toggle navigation" style="">
                    <span></span>
                    <span></span>
                  </button>
                </div>
              </div>
            </div>
                <ul class="nav navbar-nav ml-auto">
		  <li class="nav-item">
              {% if not au %}
		    <a class="nav-link" href="{% url 'game:login' %}">Home</a>
              {% endif %}
              {% if au %}
            <a class="nav-link" href="{% url 'game:postlogin' %}">Home</a>
              {% endif %}
		  </li>
            <li class="nav-item">
		<a class="nav-link" href="{% url 'game:postlogin' %}#section1" data-toggle="modal" data-target="#modal-doc" >How to Play?</a>
	      </li>
		  <li class="nav-item">
		    <a class="nav-link" href="{% url 'game:login' %}#section3">About Us</a>
		  </li>
		  <li class="nav-item">
		    <a class="nav-link" href="{% url 'game:login' %}#section4">Contact Us</a>
		  </li>
        <li class="nav-item dropdown">
            {% if au %}
		    <a href="#" class="nav-link" data-toggle="dropdown" role="button">
                <span class="nav-link-inner--text">Hi, {{username}}!</span>
              </a>
              <div class="dropdown-menu">
                <a href="{% url 'game:submit' %}" class="dropdown-item">Submit Bot</a>
                <a href="{% url 'game:logout' %}" class="dropdown-item">Sign Out</a>
              </div>
            {% endif %}
            {% if not au %}
            <a id="lg1" class="nav-link" href="{% url 'game:login' %}#section2">Login</a>
            {% endif %}
		  </li>

		</ul>





          </div>
        </div>
      </nav>



  <div class="container" style="font-family:'Montserrat';">


            <div class="modal fade" id="modal-doc" tabindex="-1" role="dialog" aria-labelledby="modal-form" aria-hidden="true">
                <div class="modal-dialog modal- modal-dialog-centered modal-lg" role="document">
                    <div class="modal-content m-2">
                        <div class="modal-body p-0">
                            <div class>
                                <div class="card-body px-lg-3 py-lg-4">
                                    <div class="row">
                                    <div class="col-sm-9  ">
                                    <h1 class="display-4">How to Play?</h1>

                                    </div>
                                        <div class="col-sm-3 d-flex justify-content-end" >
                                            <button class="" data-toggle="modal" data-target="#modal-doc" style="background-color: rgba(0,0,0,0);border:0px; transform: translateY(-15px);"><i class="fa fa-times"></i></button>
                                        </div>
                                    </div>
                                    <div class="card mb-3">
                                     <div class=" col-lg-12">
                                        <div style="padding: 10px; margin: 10px;" class="container">
                            <p class="large" style="border-radius: 15px;"><span class="" style="padding: 10px; "><h5><b>Rules</b></h5></span> </p>
                            <ul class="ul"><li style="font-size: 15px;">The Code for the bots must be strictly written in C/C++/Python.</li>
                                <li style="font-size: 15px;">The bots will be disqualified due to any errors in the code or invalid moves.</li>
                                <li style="font-size: 15px;">Bots will also be disqualified if they fail to respond in the specified time limit.</li>
                                                <li style="font-size: 15px;">Malicious activity or excessive resource consumption will also result in disqualification.</li>
                                                <li style="font-size: 15px;">Please refer to the documentation for the detailed set of rules.</li>
                              </ul>
                         </div>
                                        </div>


                                    </div>
                                <div class="card">

                                        <div class="col-lg-12">
                         <div style="padding: 10px; margin: 10px;" class="container">
                            <p class="large" style="border-radius: 15px;"><span class="large th-large heading" style="padding: 10px;"><h5><b>Documentation</b></h5></span> </p>
                            <ul class="ul">
                                    <li style="font-size: 15px;">The problem statement for Krieg is provided below along with a detailed documentation to understand the game rules.</li>
                                                    <li style="font-size: 15px;">Templates in C/C++/Python are put up to illustrate the basic structure of the code, in order to get started</li>
                                    <li style="font-size: 15px;">May the best algorithm win!</li>
                                    </ul><br><br>
                             <div class="row d-flex justify-content-between">
                            <div class="col-sm-8" >
                                <div class="dropdown mb-3">
                                  <button type="button" class="btn btn-primary dropdown-toggle" data-toggle="dropdown">
                                   Template
                                  </button>
                                  <div class="dropdown-menu">
                                    <a class="dropdown-item" href="{% static 'game/ctemplate.c' %}" download="ctemplate.c">C</a>
                                    <a class="dropdown-item" href="{% static 'game/cpptemplate.cpp' %}" download="cpptemplate.cpp">C++</a>
                                    <a class="dropdown-item" href="{% static 'game/python_template.py' %}"download="python_template.py">Python</a>
                                  </div>
                                </div>
                                                </div>

                             <div class="col-sm-4">
                                        
                                        
                                        <a class="btn btn-icon btn-3 btn-primary"  style="color:white" href="{% static 'game/doc.pdf' %}" download="doc.pdf">
                                            <span class="btn-inner--icon"><i class="fa fa-file-pdf-o" aria-hidden="true"></i></span>
                                            <span class="btn-inner--text">Download PDF</span>
                                            </a>
                                
                                 </div>
                             </div>
                         </div>
                     </div>
                                    <!--<button class="btn btn-icon btn-3 btn-primary" type="button">
                                        <span class="btn-inner--icon"><i class="fa fa-file-pdf-o" aria-hidden="true"></i></span>
                                        <span class="btn-inner--text">Download as pdf</span>
                                    </button>-->
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>


        </div>





<div class="container-fluid pb-5" style="">
	<div class="row">


			<div class="col-sm-12 col-lg-6" style="position:relative">

		      <div class="container" style="position:relative">

			    <canvas id="myCanvasterrain" width="620" height="600" style="border:1px solid #d3d3d3; background-color: rgba(0,0,0,1);position:absolute;z-index:-2;margin-top: 40px;margin-right:10px;margin-left: 40px;border-radius:15px;display:block"></canvas>

			      <canvas id="myCanvasplanes" width="620" height="600" style="border:none; background-color: rgba(0,0,0,0);position:absolute;z-index:0;margin-top: 40px;margin-left: 40px;margin-right:10px;border-radius: 15px;display:block"></canvas>

			      <canvas id="myCanvasbuttons" width="620" height="600" style="border:none; ;position:absolute;background-color: rgba(0,0,0,0.1);z-index:-1;margin-top: 40px;margin-left: 40px;margin-right:10px;border-radius: 15px;display:block"></canvas>



			    <canvas id="explosion" width="620" height="600" style="border:1px solid #d3d3d3;background-color: rgba(0,0,0,0.25);position:absolute;margin-left:40px;margin-top:40px;margin-right:10px;z-index:0;border-radius: 15px;display:block"></canvas>




			      </div>

			</div>


		      <div class="col-lg-5 col-sm-12">
		      <div class="container phone">
		      	<div class="row" style="margin-top:5em;">
		      		<div class="col-lg-12">
		      			<input class="col-10" id="stringip" type="text" style="width:20rem;height:30px;color: black;border-radius:10px;margin:5px;padding-left:20px" placeholder="String Input...">
                        <button style="font-size:0.7rem;" class="btn button-primary col-2" id="stringbtn" onclick="stringInput()">Submit</button>
		      		</div>
		      		
		      	</div>
		      	<div class="row" style="margin-top:2rem;padding-left:0.5rem">
		      		<div class="col-lg-4">
		      			<button id="undo" onclick="undomove()" class="btn button-primary">Undo Move</button>
		      		</div>
		      		<div class="col-lg-4">
		      			<button id="undo" onclick="history.go(0)" class="btn button-primary">Restart</button>
		      		</div>
		      	</div>
		      	<div class="row">
		      		<div class="col-10" style="height:8.4rem;border:solid 2px #fff;color:white;border-radius:20px;margin-top:50px;overflow-y:auto">
		      		<p style="font-size:1.5rem;margin-bottom:0px;">Status</p>

		      		<p id="status" style="font-size:1.2rem;">Sentinel's turn (Blue):</p>
		      		</div>


		      	</div>
                

		      	<div class="row" style="">
		      		<div class="col-10" style="height:15rem;border:solid 2px #fff;color:white;border-radius:10px;margin-top:20px;overflow-y:scroll;">
		      		<p style="font-size:1.7rem;margin-bottom:0px;">Rules</p>

		      		<p style="font-size:1.2rem;">
Player 1: Sentinel (Blue)<br>
Player 2: Scourge (Red)<br>
Stingers are placed in row 1 and 3.<br>
Bombers are placed in row 0 and 4.<br>
<br>
1. Each player gets one move per turn.<br>

2.Moves: Stingers (row 1 and 3) can move diagonally forward while the bombers (row 0 and 4) can move forward in all directions.
Example: If a bomber is placed in location (4,2) then it can move to (3,1), (3,3), (3,2), (4,1), (4,3) provided the space is empty.
Note: All moves are only forward. There are no backward moves in the game.<br>

3. Vertical Elimination: When your token (stinger or bomber) comes face to face with the opponent’s token and the space behind the opponent’s token is empty, then the player can eliminate the opponent's token by jumping straight to the empty space.<br>

4. Horizontal Elimination: When your token (stinger or bomber) has an enemy token on its left or right side, and the space next to the enemy token is empty, then the player can eliminate the opponent’s token by jumping straight to the empty space.<br>

5. Gameover: The game ends when either player’s bomber reaches the respective opponent’s base row (row 0 and 4).<br>

<br>
To click and play:<br>
1. Select the token you want to move.<br>
2. Click a valid empty space to move the token.<br>
<br>
Using string inputs:<br>
1. Enter the input in the textbox using the following format:<br>
	row1 col1 row2 col2<br>
row1 col1= Initial position<br>
row2 col2= Final position<br>

Note: There is a space after row1,col1 and row2 respectively.<br>

                        <b>For a more comprehensive description of the game, please refer to the documentation.</b>

					
				</p>
		      		</div>


		      	</div>






			</div>
		  </div>





	</div>



      </div>







      <script>
            function loadImages(sources,str, callback) {
                var images = {};
                var loadedImages = 0;
                var numImages = 0;
                // get num of sources
                for(var src in sources) {
                    numImages++;
                }
                for(var src in sources) {
                    images[src] = new Image();
                    images[src].onload = function() {
                    if(++loadedImages >= numImages) {
                      callback(images);
                    }
                    };
                    images[src].src = sources[src];
                }
            }


            var canvasplane = document.getElementById('myCanvasplanes');
            var contextplane = canvasplane.getContext('2d');
            var boardplane = new Array(7);
            for (var i = 0; i < 7; i++)
            {
                boardplane[i] = new Array(7);
            }

            var sources = {
                m1:"{% static 'game/svg/blimp-1-0.svg' %}",
                m145: "{% static 'game/svg/blimp-1-45.svg' %}",
                m1_45: "{% static 'game/svg/blimp-1-135.svg' %}",
                m1_90: "{% static 'game/svg/blimp-1-180.svg' %}",
                m190: "{% static 'game/svg/blimp-1-90.svg' %}",
                p145: "{% static 'game/svg/plane-1-135.svg' %}",
                p1_45: "{% static 'game/svg/plane-1-45.svg' %}",
                p190: "{% static 'game/svg/plane-1-90.svg' %}",
                p1_90: "{% static 'game/svg/plane-1-180.svg' %}",
                p1: "{% static 'game/svg/plane-1-0.svg' %}",
                p2: "{% static 'game/svg/plane-2-0.svg' %}",
                p245: "{% static 'game/svg/plane-2-135.svg' %}",
                p2_45: "{% static 'game/svg/plane-2-45.svg' %}",
                p290: "{% static 'game/svg/plane-2-90.svg' %}",
                p2_90: "{% static 'game/svg/plane-2-180.svg' %}",
                m2:"{% static 'game/svg/blimp-2-0.svg' %}",
                m245: "{% static 'game/svg/blimp-2-45.svg' %}",
                m2_45: "{% static 'game/svg/blimp-2-135.svg' %}",
                m2_90: "{% static 'game/svg/blimp-2-180.svg' %}",
                m290: "{% static 'game/svg/blimp-2-90.svg' %}",
                k:"{% static 'game/killwhite.png' %}",
            };


          var basem=5

          loadImages(sources,str="", function abc(images) {

              for(var i=0;i<5;i++){
                boardplane[0][i] = new IMAGE(images.m2,(i)*110+80,80, 40, 70)
                boardplane[1][i]=  new IMAGE(images.p2,(i)*110+80-basem, 180, 50,50);
                boardplane[2][i]= new IMAGE(images.k,(i)*110+80-basem, 280, 50,50);
                boardplane[3][i]= new IMAGE(images.p1,(i)*110+80-basem, 380, 50,50);
                boardplane[4][i]= new IMAGE(images.m1,(i)*110+80, 480, 40, 70);

                }


               function IMAGE(image,x,y,w,h){
                    this.image=image;
                    this.x=x;
                    this.y=y;
                    this.w=w;
                    this.h=h;

                    this.draw = function(){

                    contextplane.drawImage(this.image,this.x,this.y, this.w, this.h);
                    }

                    this.update = function(){
                        this.draw();

                    }

                    this.kill = function(){
                        this.image=images.k;
                        this.w=50;
                        this.h=50;
                       //contextplane.drawImage(this.images,this.x,this.y, this.w, this.h);

                    }

                    this.replace = function(x){
                        this.image= images.x;

                    }


                }
              /////////////////////////////////////////////////////////////////////////////////////////////////////////

                var canvasbuttons = document.getElementById('myCanvasbuttons');
                var c = canvasbuttons.getContext("2d");
                var board = new Array(7);
                for (var i = 0; i < 7; i++)
                {
                board[i] = new Array(7);
                }

                function Game(r,c)
                {
                this.r=r;
                this.c=c;
                }


                var sinput = new Game(undefined,undefined);
                var minput = new Game(undefined,undefined);
                var gsinput = new Game(undefined,undefined);
                var gminput = new Game(undefined,undefined);
                var usinput = new Game(undefined,undefined);
                var uminput = new Game(undefined,undefined);


                var ix,iy;

              var gameoverflag=0;
              var animateflag=0;

              var ukillflag=0;

              var eliminateflag=0;
              
              var undodone=0








                var mouse={
                    x:undefined,
                    y:undefined

                }

                window.addEventListener("click", function(event)
                {
                    if(animateflag==0){
                        var rect = canvasbuttons.getBoundingClientRect();
                        mouse.x=event.x-rect.left;//70;
                        mouse.y=event.y-rect.top;//110;
                        console.log(mouse.x+" "+mouse.y)
                        playMove();
                       }



                });
                //console.log(str);


                var whoseMove="B";
                var emptyclick=false;
                var flag;




                for(i=0;i<5;i++){
                    board[0][i] = new Circle((i)*110+100,115,45,"rgba(0,0,0,0)","B");

                    board[1][i] = new Circle((i)*110+100,205,30,"rgba(0,0,0,0)","b");

                    board[2][i] = new Circle((i)*110+100,305,20,"rgba(0,0,0,0)","-");

                    board[3][i] = new Circle((i)*110+100,405,30,"rgba(0,0,0,0)","w");

                    board[4][i] = new Circle((i)*110+100,515,45,"rgba(0,0,0,0)","W");
                }


                function Circle(x,y,radius,color,id){
                        this.id=id
                        this.x=x;
                        this.y=y;
                        this.radius=radius;
                        this.color=color;
                        this.enabled=1;

                        this.draw = function(){

                        c.beginPath();
                        c.arc(this.x,this.y,this.radius,0,Math.PI*2);
                        //c.stroke();
                        c.fillStyle=this.color;
                        c.fill();
                        }

                        this.update = function(){
                            this.draw();
                        }

                        this.kill = function(){
                            this.id="-";
                            this.radius=15;
                            //this.color="#fff";

                        }
                        this.unkill = function(i,r){
                            this.id=i;
                            this.radius=r;
                        }




                    }


                    var str,s;
        var ipbox = document.getElementById("stringip");
        var btn=document.getElementById("stringbtn");
        btn.onclick =function(){

            str=ipbox.value;
            console.log(str);
            s = str.split(" ");

            if(s.length==4){

                for(var i=0;i<4;i++){
                    if(s[i]==0 || s[i]==1 || s[i]==2 || s[i]==3 || s[i]==4)
                    {
                        continue;
                    }
                    else
                        break;

                }
                if(i==4)
                {

                        console.log("valid string");
                        sinput.r=parseInt(s[0]);
                        sinput.c=parseInt(s[1]);
                        minput.r=parseInt(s[2]);
                        minput.c=parseInt(s[3]);
                        //console.log(board[sinput.r][sinput.c].id)
                        if((board[sinput.r][sinput.c].id==whoseMove||board[sinput.r][sinput.c].id==whoseMove.toLowerCase()) && board[minput.r][minput.c].id=="-")
                            {
                                //strflag=1;
                                 document.getElementById("status").innerHTML=""
                                 move();
                            }

                        else
                            document.getElementById("status").innerHTML=("Invalid Move<br>");

                }
                else
                     document.getElementById("status").innerHTML=("Invalid String\nString Input Format: x1 y1 x2 y2<br>");

            }

            else
                     document.getElementById("status").innerHTML=("Invalid String<br>String Input Format: x1 y1 x2 y2<br>");
            
            
            ipbox.value="";
            

        }



                    function print()
                    {

                        for(var i=0;i<5;i++)
                            {
                                for(var j=0;j<5;j++)
                                    {
                                       board[i][j].update();
                                       boardplane[i][j].update();

                                    }
                            }


                    }

            function drawBoard()
            {
                /*
                c.beginPath();
                c.lineWidth=2;
                c.strokeStyle="rgba(255,255,255,0.5)";
                c.moveTo(70,50);
                c.lineTo(70,550)
                c.moveTo(70,50);
                c.lineTo(550,50)
                c.lineT

                c.stroke();
                */

            }

          function drawnumberrow(){
              for(var i=0;i<5;i++)
                  {
                      c.font="30px Arial";
                      c.fillStyle="rgba(255,255,255,0.4)";
                      c.fillText(i,20,i*100+115);

                  }

          }

          function drawnumbercol(){
              for(var i=0;i<5;i++)
                  {
                      c.font="30px Arial";
                      c.fillStyle="rgba(255,255,255,0.4)";
                      c.fillText(i,i*110+90,50);

                  }

          }





        function playMove()
            {
            console.log(whoseMove);

            var invWhoseMove;
            if(whoseMove=="B")
            {
               invWhoseMove="W"
            }
            else if(whoseMove=="W")
            {
               invWhoseMove="B"
            }

            for(var i=0;i<5;i++)
                    {
                        for(var j=0;j<5;j++)
                            {
                                var dist=Math.sqrt(Math.pow((mouse.x-board[i][j].x),2)+Math.pow((mouse.y-board[i][j].y),2));
                                if(dist<=board[i][j].radius)
                                    {
                                        strflag=0;

                                        if(gameoverflag==0 && board[i][j].enabled==1){
                                            if(sinput.r!=undefined&&sinput.c!=undefined&&board[i][j]==board[sinput.r][sinput.c])
                                            {

                                                board[sinput.r][sinput.c].color="rgba(0,0,0,0)";
                                                sinput.r=undefined;
                                                sinput.c=undefined;


                                                emptyclick=!emptyclick;
                                                //undoflag=0;

                                            }




                                            else if((board[i][j].id==whoseMove||board[i][j].id==whoseMove.toLowerCase())&&!emptyclick)
                                            {
                                            if(whoseMove=="B")
                                            {
                                               board[i][j].color="rgba(255,255,255,0.7)";
                                               document.getElementById("status").innerHTML="Player 1 (Sentinel) Selected [ "+i.toString()+" , "+j.toString()+" ]<br>";
                                            }
                                            else if(whoseMove=="W")
                                            {
                                               board[i][j].color="rgba(255,255,255,0.7)";
                                               document.getElementById("status").innerHTML="Player 2 (Scourge) Selected [ "+i.toString()+" , "+j.toString()+" ]<br>";
                                            }


                                            sinput.r=i;
                                            sinput.c=j;

                                            emptyclick=!emptyclick;
                                            undoflag=0;
                                            eliminateflag=0;


                                            }

                                            else if(sinput.r!=undefined&&sinput.c!=undefined&&board[i][j].id=="-" && emptyclick )
                                            {
                                                if(sinput.r-i==0&&(sinput.c-j==2||sinput.c-j==-2)&&(sinput.r==0||sinput.r==4)&&(i==0||i==4)){
                                                    document.getElementById("status").innerHTML=("Invalid move<br>")

                                                }
                                                else{
                                                    document.getElementById("status").innerHTML= "\nSelected: [ "+i.toString()+" , "+j.toString()+" ]<br>";
                                                    emptyclick=!emptyclick;
                                                    minput.r=i;
                                                    minput.c=j
                                                    console.log(sinput.r+" "+sinput.c+" to "+minput.r+" "+minput.c)

                                                    if(board[sinput.r][sinput.c].id=="B"||board[sinput.r][sinput.c].id.toUpperCase()=="B")
                                                        board[sinput.r][sinput.c].color="rgba(255,255,255,0)";
                                                    else if(board[sinput.r][sinput.c].id=="W"||board[sinput.r][sinput.c].id.toUpperCase()=="W")
                                                        board[sinput.r][sinput.c].color="rgba(255,255,255,0)";

                                                    //makeMove()
                                                    move();
                                                    //var obj = new HTML5canvas
                                                    //obj.runExplosion()

                                                }





                                            }
                                            else
                                            {
                                            document.getElementById("status").innerHTML=("Invalid Move<br>");
                                            board[sinput.r][sinput.c].color="rgba(255,255,255,0)";
                                            emptyclick=false;
                                            sinput.r=undefined;
                                            sinput.c=undefined;
                                            minput.r=undefined;
                                            minput.c=undefined;

                                            //emptyclick=false;

                                            }
                                        }



                                }
                        }
                    }

        }





        var btn1=document.getElementById("undo");
          btn1.onclick = function undomove() {
              //undoflag=1;

                var temp = board[usinput.r][usinput.c];
                var temp1= boardplane[usinput.r][usinput.c];
              
              
              if(undodone==0){
                  invert();
                  
              if(ukillflag==0){

                  if((board[uminput.r][uminput.c].id=="W"||board[uminput.r][uminput.c].id=="B") ){

                    boardplane[uminput.r][uminput.c].x-=basem;
                    boardplane[uminput.r][uminput.c].y+=10;
                    boardplane[usinput.r][usinput.c].x+=basem;
                    boardplane[usinput.r][usinput.c].y-=10;

                }
                  
                ukilltype="-";


                board[usinput.r][usinput.c] = board[uminput.r][uminput.c];
                board[uminput.r][uminput.c] = temp;

                temp = board[usinput.r][usinput.c].x;
                board[usinput.r][usinput.c].x = board[uminput.r][uminput.c].x;
                board[uminput.r][uminput.c].x = temp;

                temp = board[usinput.r][usinput.c].y;
                board[usinput.r][usinput.c].y = board[uminput.r][uminput.c].y;
                board[uminput.r][uminput.c].y = temp;

               //invert();
                boardplane[usinput.r][usinput.c] = boardplane[uminput.r][uminput.c];
                boardplane[uminput.r][uminput.c] = temp1;

                temp1 = boardplane[usinput.r][usinput.c].x;
                boardplane[usinput.r][usinput.c].x = boardplane[uminput.r][uminput.c].x;
                boardplane[uminput.r][uminput.c].x = temp1;

                temp1 = boardplane[usinput.r][usinput.c].y;
                boardplane[usinput.r][usinput.c].y = boardplane[uminput.r][uminput.c].y;
                boardplane[uminput.r][uminput.c].y = temp1;


                document.getElementById("status").innerHTML="";
                undodone=1;
                  board[usinput.r][usinput.c].enabled=1;




              }

              else{
                board[usinput.r][usinput.c] = board[uminput.r][uminput.c];
                board[uminput.r][uminput.c] = temp;

                temp = board[usinput.r][usinput.c].x;
                board[usinput.r][usinput.c].x = board[uminput.r][uminput.c].x;
                board[uminput.r][uminput.c].x = temp;

                temp = board[usinput.r][usinput.c].y;
                board[usinput.r][usinput.c].y = board[uminput.r][uminput.c].y;
                board[uminput.r][uminput.c].y = temp;



                boardplane[usinput.r][usinput.c] = boardplane[uminput.r][uminput.c];
                boardplane[uminput.r][uminput.c] = temp1;

                temp1 = boardplane[usinput.r][usinput.c].x;
                boardplane[usinput.r][usinput.c].x = boardplane[uminput.r][uminput.c].x;
                boardplane[uminput.r][uminput.c].x = temp1;

                temp1 = boardplane[usinput.r][usinput.c].y;
                boardplane[usinput.r][usinput.c].y = boardplane[uminput.r][uminput.c].y;
                boardplane[uminput.r][uminput.c].y = temp1;



                board[usinput.r][usinput.c].enabled=1;


                  if(ukilltype=="B"){

                      board[(usinput.r + uminput.r) / 2][(usinput.c + uminput.c) / 2].unkill("B",50)
                      boardplane[(usinput.r + uminput.r) / 2][(usinput.c + uminput.c) / 2].image=images.m2;
                      boardplane[(usinput.r + uminput.r) / 2][(usinput.c + uminput.c) / 2].w=40
                      boardplane[(usinput.r + uminput.r) / 2][(usinput.c + uminput.c) / 2].h=70
                      boardplane[(usinput.r + uminput.r) / 2][(usinput.c + uminput.c) / 2].x+=basem
                      boardplane[(usinput.r + uminput.r) / 2][(usinput.c + uminput.c) / 2].y-=10
                      ukilltype="-";
                  }
                  else if(ukilltype=="b"){
                      board[(usinput.r + uminput.r) / 2][(usinput.c + uminput.c) / 2].unkill("b",30)
                      boardplane[(usinput.r + uminput.r) / 2][(usinput.c + uminput.c) / 2].image=images.p2;
                      ukilltype="-";
                  }
                  else if(ukilltype=="W"){
                      board[(usinput.r + uminput.r) / 2][(usinput.c + uminput.c) / 2].unkill("W",50)
                      boardplane[(usinput.r + uminput.r) / 2][(usinput.c + uminput.c) / 2].image=images.m1;
                      boardplane[(usinput.r + uminput.r) / 2][(usinput.c + uminput.c) / 2].w=40
                      boardplane[(usinput.r + uminput.r) / 2][(usinput.c + uminput.c) / 2].h=70
                      boardplane[(usinput.r + uminput.r) / 2][(usinput.c + uminput.c) / 2].x+=basem
                      boardplane[(usinput.r + uminput.r) / 2][(usinput.c + uminput.c) / 2].y-=10
                      ukilltype="-";
                  }
                  else if(ukilltype=="w"){
                      board[(usinput.r + uminput.r) / 2][(usinput.c + uminput.c) / 2].unkill("w",30)
                      boardplane[(usinput.r + uminput.r) / 2][(usinput.c + uminput.c) / 2].image=images.p1;
                      ukilltype="-";
                  }


                  console.log("unkill")

              }
                  
                
                emptyclick=false;
                sinput.r=undefined;
                sinput.c=undefined;
                minput.r=undefined;
                minput.c=undefined;
                //invert();

                document.getElementById("status").innerHTML="";
                undodone=1;
                //emptyclick=false;
                //resetE();

              }
          
        }



    function makeMove(){
    console.log("flag: "+flag);
    var temp = board[sinput.r][sinput.c];
    var temp1= boardplane[sinput.r][sinput.c];


    if (flag == 2){
        
            if(board[sinput.r][sinput.c].id=="W"&&board[(sinput.r + minput.r) / 2][(sinput.c + minput.c) / 2].id=="B")
                {
                    boardplane[(sinput.r + minput.r) / 2][(sinput.c + minput.c) / 2].x+=5
                    boardplane[(sinput.r + minput.r) / 2][(sinput.c + minput.c) / 2].y-=10
                }
        
            else if(board[sinput.r][sinput.c].id=="B"&&board[(sinput.r + minput.r) / 2][(sinput.c + minput.c) / 2].id=="W"){
                boardplane[(sinput.r + minput.r) / 2][(sinput.c + minput.c) / 2].x+=5
                boardplane[(sinput.r + minput.r) / 2][(sinput.c + minput.c) / 2].y-=10
            }
            
        
            board[sinput.r][sinput.c] = board[minput.r][minput.c];
            board[minput.r][minput.c] = temp;

            temp = board[sinput.r][sinput.c].x;
            board[sinput.r][sinput.c].x = board[minput.r][minput.c].x;
            board[minput.r][minput.c].x = temp;

            temp = board[sinput.r][sinput.c].y;
            board[sinput.r][sinput.c].y = board[minput.r][minput.c].y;
            board[minput.r][minput.c].y = temp;

            if((board[minput.r][minput.c].id=="W"||board[minput.r][minput.c].id=="B") ){
                boardplane[minput.r][minput.c].x+=basem;
                boardplane[minput.r][minput.c].y-=10;
                boardplane[sinput.r][sinput.c].x-=basem;
                boardplane[sinput.r][sinput.c].y+=10;

                if(board[(sinput.r + minput.r) / 2][(sinput.c + minput.c) / 2].id=="B"||board[(sinput.r + minput.r) / 2][(sinput.c + minput.c) / 2].id=="W")
                    {
                        boardplane[(sinput.r + minput.r) / 2][(sinput.c + minput.c) / 2].x-=basem;
                        boardplane[(sinput.r + minput.r) / 2][(sinput.c + minput.c) / 2].y+=10
                    }


            }
            if(board[(sinput.r + minput.r) / 2][(sinput.c + minput.c) / 2].id=="W"||board[(sinput.r + minput.r) / 2][(sinput.c + minput.c) / 2].id=="B")
                {
                    boardplane[(sinput.r + minput.r) / 2][(sinput.c + minput.c) / 2].x-=5
                    boardplane[(sinput.r + minput.r) / 2][(sinput.c + minput.c) / 2].y+=10
                }
        
        
            

            
            ukillflag=1;
            //canvases.push(new HTML5canvas(boardplane[(sinput.r + minput.r) / 2][(sinput.c + minput.c) / 2].x+20,boardplane[(sinput.r + minput.r) / 2][(sinput.c + minput.c) / 2].y+20));
            Elimination ();

            if((whoseMove=="B" && minput.r==4)||(whoseMove=="W" && minput.r==0))
                board[minput.r][minput.c].enabled=0;


            undodone=0;
            invert();
            
        /*
            boardplane[sinput.r][sinput.c] = boardplane[minput.r][minput.c];
            boardplane[minput.r][minput.c] = temp1;

            temp1 = boardplane[sinput.r][sinput.c].x;
            boardplane[sinput.r][sinput.c].x = boardplane[minput.r][minput.c].x;
            boardplane[minput.r][minput.c].x = temp1;

            temp1 = boardplane[sinput.r][sinput.c].y;
            boardplane[sinput.r][sinput.c].y = boardplane[minput.r][minput.c].y;
            boardplane[minput.r][minput.c].y = temp1;
        */
            ix = boardplane[sinput.r][sinput.c].x;
            iy = boardplane[sinput.r][sinput.c].y;
            animateflag=1;
            strflag=0;

            document.getElementById("status").innerHTML+="Valid Move<br>";
        
        
            usinput.r=sinput.r;
            usinput.c=sinput.c;
            uminput.r=minput.r;
            uminput.c=minput.c;
        
        

            if(gameover()==1){
        if(whoseMove=="B"){

                    //boardplane[minput.r][minput.c].y-=5;
                    var i=0;
                    var j=0;
                    setInterval(function(){
                        if(board[i][j].id=="B"||board[i][j].id=="b"){
                            boardplane[i][j].kill();
                            canvases.push(new HTML5canvas(boardplane[i][j].x+20,boardplane[i][j].y+20));
                        }
                        else{
                            clearInterval();

                        }
                        j++;
                        if(j==5){
                            i++;
                            j=0;
                        }


                    },300);

                }

                else{
                   // boardplane[minput.r][minput.c].y+=5;
                    var i=0;
                    var j=0;
                    setInterval(function abc(){
                        if(board[i][j].id=="W"||board[i][j].id=="w"){
                            boardplane[i][j].kill();
                            canvases.push(new HTML5canvas(boardplane[i][j].x+20,boardplane[i][j].y+20));
                        }
                        else{
                            clearInterval();

                        }
                        j++;
                        if(j==5){
                            i++;
                            j=0;
                        }


                    },300);

                }
        animateflag=1;
        gameoverflag=1;
        document.getElementById("status").innerHTML=document.getElementById("status").innerHTML+("Gameover<br>");
    }



        }

    else if(flag==1){
        
       
        
    board[sinput.r][sinput.c] = board[minput.r][minput.c];
    board[minput.r][minput.c] = temp;

    temp = board[sinput.r][sinput.c].x;
    board[sinput.r][sinput.c].x = board[minput.r][minput.c].x;
    board[minput.r][minput.c].x = temp;

    temp = board[sinput.r][sinput.c].y;
    board[sinput.r][sinput.c].y = board[minput.r][minput.c].y;
    board[minput.r][minput.c].y = temp;

    if((whoseMove=="B" && minput.r==4)||(whoseMove=="W" && minput.r==0))
                board[minput.r][minput.c].enabled=0;

        undodone=0;
    invert();
    
        /*
    boardplane[sinput.r][sinput.c] = boardplane[minput.r][minput.c];
    boardplane[minput.r][minput.c] = temp1;

    temp1 = boardplane[sinput.r][sinput.c].x;
    boardplane[sinput.r][sinput.c].x = boardplane[minput.r][minput.c].x;
    boardplane[minput.r][minput.c].x = temp1;

    temp1 = boardplane[sinput.r][sinput.c].y;
    boardplane[sinput.r][sinput.c].y = boardplane[minput.r][minput.c].y;
    boardplane[minput.r][minput.c].y = temp1;
    */



    ix = boardplane[sinput.r][sinput.c].x;
    iy = boardplane[sinput.r][sinput.c].y;
    animateflag=1;


    strflag=0;
        
    ukillflag=0;
        
    document.getElementById("status").innerHTML+="Valid Move";
        
        usinput.r=sinput.r;
        usinput.c=sinput.c;
        uminput.r=minput.r;
        uminput.c=minput.c;

    

    if(gameover()==1){
        if(whoseMove=="B"){

                    //boardplane[minput.r][minput.c].y-=5;
                    var i=0;
                    var j=0;
                    setInterval(function(){
                        if(board[i][j].id=="B"||board[i][j].id=="b"){
                            boardplane[i][j].kill();
                            canvases.push(new HTML5canvas(boardplane[i][j].x+20,boardplane[i][j].y+20));
                        }
                        else{
                            clearInterval();

                        }
                        j++;
                        if(j==5){
                            i++;
                            j=0;
                        }


                    },300);

                }

                else{
                   // boardplane[minput.r][minput.c].y+=5;
                    var i=0;
                    var j=0;
                    setInterval(function abc(){
                        if((board[i][j].id=="W")||(board[i][j].id=="w")){
                            boardplane[i][j].kill();
                            canvases.push(new HTML5canvas(boardplane[i][j].x+20,boardplane[i][j].y+20));
                        }
                        else{
                            clearInterval();

                        }
                        j++;
                        if(j==5){
                            i++;
                            j=0;
                        }


                    },300);

                }
        animateflag=1;
        gameoverflag=1;
        document.getElementById("status").innerHTML+=("Gameover<br>");
    }


    }

}


        function move ()
        {

                if (board[sinput.r][sinput.c].id==whoseMove||board[sinput.r][sinput.c].id==whoseMove.toLowerCase())
                {
                     mValidation (sinput, minput); //to check if the selected move is valid
                    if (flag == 1 || flag == 2)  // 1->non eliminating move 2->eliminating move
                    {

                        makeMove();//to evaluate the move once its validated
                    }
                    else if (flag == 0)
                    {
                        //resetE();
                        emptyclick=false;
                        sinput.r=undefined;
                        sinput.c=undefined;
                        minput.r=undefined;
                        minput.c=undefined;
                        document.getElementById("status").innerHTML=("Error:\n Invalid Move\n, Enter Input again!<br>");
                        //move();
                        //resetColors();
                    }
                }

        }


        function mValidation()
        {


            var d1, d2;
            d1 = minput.r - sinput.r; // difference between initial and final row position
            d2 = minput.c - sinput.c; //difference between initial and final cols position
            //colour_generalize (x); //generalize all functions to work for either colour

            var x;
            if(whoseMove=="B")
            {
                x=1;
            }
            else if(whoseMove=="W")
            {
                x=0;
            }



            if (board[minput.r][minput.c].id == '-' && minput.c >= 0 && minput.c <= 4 && minput.r <= 4 && minput.r >= 0) //check if final position is vacant
            {
                if (board[sinput.r][sinput.c].id==whoseMove) //moveset for mantri
                {
                    if ((d1 == (2 * x - 1) || d1 == 0) && (d2 == (2 * x - 1) || d2 == -(2 * x - 1) || d2 == 0) ) //mantri moves single space in any allowed direction
                    {
                        flag = 1;  //signifies valid non-eliminating move,turn passes to opponent
                    }
                    else if ((d1 == 2 * (2 * x - 1) && d2 == 0) || (d1 == 0 && (d2 == 2 * (2 * x - 1) || d2 == -2 * (2 * x - 1)))) //moves two spaces, in an elimination move
                    {
                        elim_package (x, d1, d2); //checks if elimination is possible and sets flag accordingly
                    }
                    else
                    {
                        flag = 0;
                    }
                }
                else if (board[sinput.r][sinput.c].id==whoseMove.toLowerCase()) //moveset for pawn
                {
                    if ((d1 == (2 * x - 1) && d2 == (2 * x - 1)) || (d1 == (2 * x - 1) && d2 == -(2 * x - 1))) //moves a single space
                    {
                        flag = 1;
                    }
                    else if ((d1 == 2 * (2 * x - 1) && d2 == 0) || (d1 == 0 && (d2 == 2 * (2 * x - 1) || d2 == -2 * (2 * x - 1)))) //moves two spaces, in an elimination move
                    {
                        elim_package (x, d1, d2);
                    }
                    else
                    {
                        flag = 0;
                    }
                }
            }
            else
            {
                flag = 0;
            }
        }


        function elim_package (x, d1, d2)
        {

            if (d1 == 2 * (2 * x - 1) && d2 == 0) //mantri moves two rows up, in an elimination move
            {
                flag = checkVerticalElimination (); //call function that checks conditions for eliminations

            }
            else if (d1 == 0 && (d2 == 2 * (2 * x - 1) || d2 == -2 * (2 * x - 1))) //mantri moves horizontally in elimination move
            {
                flag = checkHorizontalElimination(x);
            }
        }


        function checkVerticalElimination ()
        {
            var x;
            var invWhoseMove;
            if(whoseMove=="B")
            {
                x=1;
                invWhoseMove="W";
            }
            else if(whoseMove=="W")
            {
                x=0;
                invWhoseMove="B";
            }

            //colour_generalize (!x); //changing value of X and Y temporarily to detect correct target

            var t1 = board[(sinput.r + minput.r) / 2][(sinput.c + minput.c) / 2].id; //target piece  //changing value of X and Y temporarily to detect correct target
            //colour_generalize (!x);
            if (t1 == invWhoseMove || t1 == invWhoseMove.toLowerCase()) //check if neighbouring squares and piece being attacked
            {
                return 2;
            }
            else
            {
                return 0;
            }

        }


        function checkHorizontalElimination (x)
        {

            var t1 = board[(sinput.r + minput.r) / 2][(sinput.c + minput.c) / 2].id;
            var invWhoseMove;


            //colour_generalize (!x); //changing value of X and Y temporarily to detect correct target
            if(whoseMove=="B")
            {
               invWhoseMove="W";
            }
            else if(whoseMove=="W")
            {
               invWhoseMove="B";
            }


            if ( t1 == invWhoseMove || t1 == invWhoseMove.toLowerCase()) //check if neighbouring squares and piece being attacked
            {
                return 2;

            }
            else
            {
                return 0;
            }
        }


        function Elimination ()
        {
            var x;
            var invwhoseMove;
            //var x = !whosemove;
            //colour_generalize(x);

            if(whoseMove=="B")
            {
               x=0;
                invwhoseMove="W";
            }
            else if(whoseMove=="W")
            {
               x=1;
                invwhoseMove="B";
            }
            var t1 = board[(sinput.r + minput.r) / 2][(sinput.c + minput.c) / 2].id;

            //ueliminated.r=(sinput.r + minput.r) / 2;
            //ueliminated.c=(sinput.c + minput.c) / 2;
            ukilltype=board[(sinput.r + minput.r) / 2][(sinput.c + minput.c) / 2].id;
            eliminateflag=1

            if((board[(sinput.r + minput.r) / 2][(sinput.c + minput.c) / 2].id=="W"&&board[sinput.r][sinput.c].id=="B")||(board[(sinput.r + minput.r) / 2][(sinput.c + minput.c) / 2].id=="B"&&board[sinput.r][sinput.c].id=="W")){
                boardplane[(sinput.r + minput.r) / 2][(sinput.c + minput.c) / 2].x+=basem;
                boardplane[(sinput.r + minput.r) / 2][(sinput.c + minput.c) / 2].y-=10;
            }

            if(board[(sinput.r + minput.r) / 2][(sinput.c + minput.c) / 2].id=="W")
                document.getElementById("status").innerHTML=document.getElementById("status").innerHTML+("Scourge Bomber Eliminated<br>");
            else if(board[(sinput.r + minput.r) / 2][(sinput.c + minput.c) / 2].id=="w")
                document.getElementById("status").innerHTML=document.getElementById("status").innerHTML+("Scourge Stinger Eliminated<br>");
            else if(board[(sinput.r + minput.r) / 2][(sinput.c + minput.c) / 2].id=="B")
                document.getElementById("status").innerHTML=document.getElementById("status").innerHTML+("Sentinel Bomber Eliminated<br>");
            else if(board[(sinput.r + minput.r) / 2][(sinput.c + minput.c) / 2].id=="b")
                document.getElementById("status").innerHTML=document.getElementById("status").innerHTML+("Sentinel Stinger Eliminated<br>");


            board[(sinput.r + minput.r) / 2][(sinput.c + minput.c) / 2].kill();
            //boardplane[(sinput.r + minput.r) / 2][(sinput.c + minput.c) / 2].kill();




        }


        function gameover()
        {
            var result = 1;
            var x;
            var temp1,temp2;
            temp1=sinput.r;
            temp2=sinput.c;
            temp3=minput.r;
            temp4=minput.c;
            //colour_generalize (x);

            if(whoseMove=="B")
           {
               x=1;

           }
            else if(whoseMove=="W")
           {
               x=0;
           }

            var goFlag = 0;

            var sum1 = 0;
            var sum2 = 0;

            var i, j, k, l;
            
            
            var cntW=0,cntB=0;
            for(i=0;i<5;i++){
                for(j=0;j<5;j++){
                    if(board[i][j].id=="W")
                        cntW++;
                    else if(board[i][j].id=="B")
                        cntB++;
                }
            }
            if(cntB==0)
                {
                    document.getElementById("status").innerHTML=("Scourge Wins<br>");
                    return 1;
                }
            else if(cntW==0){
                document.getElementById("status").innerHTML=document.getElementById("status").innerHTML+("Sentinel Wins <br>");
                return 1;
            }
            
            

            for (j = 0; j < 5; j++)
            {
                if (board[0][j].id == 'W')
                {
                    sum1++;
                    document.getElementById("status").innerHTML=("Scourge (Red) Wins<br>");
                    return 1;
                }
                if (board[4][j].id == 'B')
                {
                    sum2++;
                    document.getElementById("status").innerHTML=("Sentinel (Blue) Wins <br>");
                    return 1;
                }
            }
            
            

            if(sum1 == 0 && sum2 == 0)
            {
                for (i = 0; i < 5; i++)
                {
                    for (j = 0; j < 5; j++)
                    {
                        if (board[i][j].id == '-')	//if place on board is blank then continue
                        {
                            continue;
                        }
                        else if (board[i][j].id == whoseMove || board[i][j].id == whoseMove.toLowerCase())
                        {
                            gsinput.r = i;
                            gsinput.c = j;
                            for (k = 0; k<=2; k++)
                            {
                                for (l = -2; l <= 2; l++)
                                {
                                    if(x==1)
                                    {gminput.r = i + k;}
                                    else
                                    {gminput.r = i - k;}
                                    gminput.c = j + l;
                                    if (gminput.c <= 4 && gminput.c >= 0 && gminput.r <= 4 && gminput.r >= 0)
                                    {
                                        sinput.r=gsinput.r;
                                        sinput.c=gsinput.c;
                                        minput.r=gminput.r;
                                        minput.c=gminput.c;
                                        mValidation ();
                                        if (flag == 1 || flag == 2)
                                        {
                                            result = 0;
                                            sinput.r=temp1;
                                            sinput.c=temp2;
                                            minput.r=temp3;
                                            minput.c=temp4;
                                            return 0;	//still valid moves left
                                        }
                                    }
                                }
                            }
                        }
                    }
                }

            }
            sinput.r=temp1;
            sinput.c=temp2;
            minput.r=temp3;
            minput.c=temp4;
            return result;


        }








          function invert(){
                if(whoseMove=="B")
                {
                   whoseMove="W";
                   //document.getElementById("status").innerHTML="Scourge's turn:<br>"
                }
                else if(whoseMove=="W")
                {
                   whoseMove="B";
                   //document.getElementById("status").innerHTML="Sentinel's turn:<br>"
                }
            }




        function hlt(){
            resetColor();
            for(var i=0;i<5;i++){
                for(var j=0;j<5;j++){
                    if(board[i][j].id=="B"){
                        if(i!=4 &&(j!=0&&j!=4))
                            {if(board[i+1][j].id=="-"||board[i+1][j+1].id=="-"||board[i+1][j-1].id=="-"||board[i][j+1].id=="-"||board[i][j-1].id=="-"){
                                if(board[i][j].color!="rgba(255,255,255,0.7)")
                                    board[i][j].color="rgba(255,255,255,0.2)"
                            }}
                        else if(i!=4&&i!=0&&j==0){
                            if(board[i+1][j].id=="-"||board[i+1][j+1].id=="-"){
                                if(board[i][j].color!="rgba(255,255,255,0.7)")
                                board[i][j].color="rgba(255,255,255,0.2)"
                            }
                        }
                        else if(i!=4&&i!=0&&j==4){
                            if(board[i+1][j].id=="-"||board[i+1][j-1].id=="-"){
                                if(board[i][j].color!="rgba(255,255,255,0.7)")
                                board[i][j].color="rgba(255,255,255,0.2)"
                            }
                        }
                        else if(i==0&&j==0){
                            if(board[i+1][j+1].id=="-"||board[i+1][j].id=="-"||board[i][j+1].id=="-"){
                                if(board[i][j].color!="rgba(255,255,255,0.7)")
                                board[i][j].color="rgba(255,255,255,0.2)"
                            }
                        }
                        else if(i==0&&j==4){
                            if(board[i+1][j-1].id=="-"||board[i+1][j].id=="-"||board[i][j-1].id=="-"){
                                if(board[i][j].color!="rgba(255,255,255,0.7)")
                                board[i][j].color="rgba(255,255,255,0.2)"
                            }
                        }


                    }
                    else if(board[i][j].id=="b"){
                        if(i!=4&&(j!=0&&j!=4))
                        {if(board[i+1][j+1].id=="-"||board[i+1][j-1].id=="-"){
                            if(board[i][j].color!="rgba(255,255,255,0.7)")
                            board[i][j].color="rgba(255,255,255,0.2)"
                        }}

                        else if(i!=4&&i!=0&&j==0){
                            if(board[i+1][j+1].id=="-"){
                                if(board[i][j].color!="rgba(255,255,255,0.7)")
                                board[i][j].color="rgba(255,255,255,0.2)"
                            }
                        }
                        else if(i!=4&&i!=0&&j==4){
                            if(board[i+1][j-1].id=="-"){
                                if(board[i][j].color!="rgba(255,255,255,0.7)")
                                board[i][j].color="rgba(255,255,255,0.2)"
                            }
                        }
                    }
                    else if(board[i][j].id=="W"){
                        if(i!=0&&(j!=0&&j!=4))
                       { if(board[i-1][j].id=="-"||board[i-1][j+1].id=="-"||board[i-1][j-1].id=="-"||board[i][j+1].id=="-"||board[i][j-1].id=="-"){
                           if(board[i][j].color!="rgba(255,255,255,0.7)")
                            board[i][j].color="rgba(255,255,255,0.2)"
                        }}

                        else if(i!=4&&i!=0&&j==0){
                            if(board[i-1][j].id=="-"||board[i-1][j+1].id=="-"){
                                if(board[i][j].color!="rgba(255,255,255,0.7)")
                                board[i][j].color="rgba(255,255,255,0.2)"
                            }
                        }
                        else if(i!=4&&i!=0&&j==4){
                            if(board[i-1][j].id=="-"||board[i-1][j-1].id=="-"){
                                if(board[i][j].color!="rgba(255,255,255,0.7)")
                                board[i][j].color="rgba(255,255,255,0.2)"
                            }
                        }

                        else if(i==4&&j==0){
                            if(board[i-1][j+1].id=="-"||board[i-1][j].id=="-"||board[i][j+1].id=="-"){
                                if(board[i][j].color!="rgba(255,255,255,0.7)")
                                board[i][j].color="rgba(255,255,255,0.2)"
                            }
                        }
                        else if(i==4&&j==4){
                            if(board[i-1][j-1].id=="-"||board[i-1][j].id=="-"||board[i][j-1].id=="-"){
                                if(board[i][j].color!="rgba(255,255,255,0.7)")
                                board[i][j].color="rgba(255,255,255,0.2)"
                            }
                        }
                    }
                    else if(board[i][j].id=="w"){
                        if(i!=0&&(j!=0&&j!=4))
                       { if(board[i-1][j+1].id=="-"||board[i-1][j-1].id=="-"){
                           if(board[i][j].color!="rgba(255,255,255,0.7)")
                            board[i][j].color="rgba(255,255,255,0.2)"
                        }}

                        else if(i!=4&&i!=0&&j==0){
                            if(board[i-1][j+1].id=="-"){
                                if(board[i][j].color!="rgba(255,255,255,0.7)")
                                board[i][j].color="rgba(255,255,255,0.2)"
                            }
                        }
                        else if(i!=4&&i!=0&&j==4){
                            if(board[i-1][j-1].id=="-"){
                                if(board[i][j].color!="rgba(255,255,255,0.7)")
                                board[i][j].color="rgba(255,255,255,0.2)"
                            }
                        }
                    }
                }
            }
        }


              function resetColor(){
                  for(var i=0;i<5;i++){
                      for(var j=0;j<5;j++){
                          if(board[i][j].color!="rgba(255,255,255,0.7)")
                          board[i][j].color="rgba(0,0,0,0)";
                      }
                  }
              }


            function Viewport() {



            var me = this;
            me.objects = [];
            var canvas = document.getElementById("myCanvasterrain");


            var drawingSurface = document.getElementById("myCanvasterrain").getContext("2d");
            var image = new Image();
            image.src = "{% static 'game/bg12.jpg' %}";
            image.onload = function () {
                me.backgroundImage = image;
                me.doPaint = true;
            }
            me.doPaint = true;
            function drawBackgroundImage() {
            if (me.backgroundImage) {
                    drawingSurface.drawImage(me.backgroundImage, 0, 0, canvas.width, canvas.height);
                }
            }
            function drawObjects() {
                for (var i = 0; i < me.objects.length; i++) {
                    me.objects[i].paint(drawingSurface);
                }
            }
            me.paintInit = function () {
                me.doPaint = true;
            }
            function paint() {
                me.paintInit();
                if (me.doPaint) {
                    drawBackgroundImage();
                    drawObjects();
                    me.doPaint = false;
                }
            }

            me.init = function () {

                //timer = setInterval(function () { paint(); }, 1000 / 30);
                paint();
                //var obj = new HTML5canvas;

              contextplane.clearRect(0,0,700,600);
                hlt();
                if(animateflag==1){

                    if(whoseMove=="B")//for w moving
                       {
                           if(board[minput.r][minput.c].id=="w"){
                               if(minput.c-sinput.c==1)
                               {
                                   boardplane[sinput.r][sinput.c].image = images.p145
                                   boardplane[sinput.r][sinput.c].w=40
                                   boardplane[sinput.r][sinput.c].h=40

                                   boardplane[sinput.r][sinput.c].x+=2;
                                   boardplane[sinput.r][sinput.c].y-=2;
                               }
                               else if(minput.c-sinput.c==-1)
                                   {
                                       boardplane[sinput.r][sinput.c].image = images.p1_45
                                       boardplane[sinput.r][sinput.c].w=40
                                       boardplane[sinput.r][sinput.c].h=40

                                       boardplane[sinput.r][sinput.c].x-=2;
                                       boardplane[sinput.r][sinput.c].y-=2;
                                   }
                               else if(minput.c-sinput.c==-2&&minput.r-sinput.r==0){
                                   boardplane[sinput.r][sinput.c].image = images.p190
                                   boardplane[sinput.r][sinput.c].w=50
                                   boardplane[sinput.r][sinput.c].h=50

                                   boardplane[sinput.r][sinput.c].x-=2;

                                   if(boardplane[sinput.r][sinput.c].x==boardplane[(sinput.r+minput.r)/2][(sinput.c+minput.c)/2].x && boardplane[sinput.r][sinput.c].y==boardplane[(sinput.r+minput.r)/2][(sinput.c+minput.c)/2].y){
                                        canvases.push(new HTML5canvas(boardplane[(sinput.r + minput.r) / 2][(sinput.c + minput.c) / 2].x+20,boardplane[(sinput.r + minput.r) / 2][(sinput.c + minput.c) / 2].y+20));
                                       boardplane[(sinput.r + minput.r) / 2][(sinput.c + minput.c) / 2].kill();
                                   }

                                   //if(eliminateflag==1)
                                       //obj.runExplosion()

                               }
                               else if(minput.c-sinput.c==2&&minput.r-sinput.r==0){
                                   boardplane[sinput.r][sinput.c].image = images.p1_90
                                   boardplane[sinput.r][sinput.c].w=50
                                   boardplane[sinput.r][sinput.c].h=50

                                   boardplane[sinput.r][sinput.c].x+=2;

                                   if(boardplane[sinput.r][sinput.c].x==boardplane[(sinput.r+minput.r)/2][(sinput.c+minput.c)/2].x && boardplane[sinput.r][sinput.c].y==boardplane[(sinput.r+minput.r)/2][(sinput.c+minput.c)/2].y){
                                        canvases.push(new HTML5canvas(boardplane[(sinput.r + minput.r) / 2][(sinput.c + minput.c) / 2].x+20,boardplane[(sinput.r + minput.r) / 2][(sinput.c + minput.c) / 2].y+20));
                                       boardplane[(sinput.r + minput.r) / 2][(sinput.c + minput.c) / 2].kill();
                                   }




                               }
                               else if(minput.c-sinput.c==0&&minput.r-sinput.r==-2){

                                       boardplane[sinput.r][sinput.c].image = images.p1
                                       boardplane[sinput.r][sinput.c].w=50
                                       boardplane[sinput.r][sinput.c].h=50

                                       boardplane[sinput.r][sinput.c].y-=2;
                                   if(boardplane[sinput.r][sinput.c].x==boardplane[(sinput.r+minput.r)/2][(sinput.c+minput.c)/2].x && boardplane[sinput.r][sinput.c].y==boardplane[(sinput.r+minput.r)/2][(sinput.c+minput.c)/2].y){
                                        canvases.push(new HTML5canvas(boardplane[(sinput.r + minput.r) / 2][(sinput.c + minput.c) / 2].x+20,boardplane[(sinput.r + minput.r) / 2][(sinput.c + minput.c) / 2].y+20));
                                       boardplane[(sinput.r + minput.r) / 2][(sinput.c + minput.c) / 2].kill();
                                   }

                                   }
                           }
                           else if(board[minput.r][minput.c].id=="W"){
                               if(minput.c-sinput.c==1&&minput.r-sinput.r==-1)
                               {
                                   boardplane[sinput.r][sinput.c].image = images.m145
                                   boardplane[sinput.r][sinput.c].w=60
                                   boardplane[sinput.r][sinput.c].h=60

                                   boardplane[sinput.r][sinput.c].x+=2;
                                   boardplane[sinput.r][sinput.c].y-=2;
                               }
                               else if(minput.c-sinput.c==-1&&minput.r-sinput.r==-1)
                                   {
                                       boardplane[sinput.r][sinput.c].image = images.m1_45
                                       boardplane[sinput.r][sinput.c].w=60
                                       boardplane[sinput.r][sinput.c].h=60

                                       boardplane[sinput.r][sinput.c].x-=2;
                                       boardplane[sinput.r][sinput.c].y-=2;
                                   }
                               else if(minput.c-sinput.c==-1&&minput.r-sinput.r==0)
                                   {
                                       boardplane[sinput.r][sinput.c].image = images.m1_90
                                       boardplane[sinput.r][sinput.c].w=70
                                       boardplane[sinput.r][sinput.c].h=40

                                       boardplane[sinput.r][sinput.c].x-=1;
                                   }
                               else if(minput.c-sinput.c==1&&minput.r-sinput.r==0)
                                   {
                                       boardplane[sinput.r][sinput.c].image = images.m190
                                       boardplane[sinput.r][sinput.c].w=70
                                       boardplane[sinput.r][sinput.c].h=40

                                       boardplane[sinput.r][sinput.c].x+=1;
                                   }
                               else if(minput.c-sinput.c==0&&minput.r-sinput.r==-1)
                                   {
                                       boardplane[sinput.r][sinput.c].image = images.m1
                                       boardplane[sinput.r][sinput.c].w=40
                                       boardplane[sinput.r][sinput.c].h=70

                                       boardplane[sinput.r][sinput.c].y-=2;
                                   }

                               else if(minput.c-sinput.c==-2&&minput.r-sinput.r==0){
                                   boardplane[sinput.r][sinput.c].image = images.m1_90
                                   boardplane[sinput.r][sinput.c].w=70
                                   boardplane[sinput.r][sinput.c].h=40

                                   boardplane[sinput.r][sinput.c].x-=1;

                                   if(boardplane[sinput.r][sinput.c].x==boardplane[(sinput.r+minput.r)/2][(sinput.c+minput.c)/2].x){
                                        canvases.push(new HTML5canvas(boardplane[(sinput.r + minput.r) / 2][(sinput.c + minput.c) / 2].x+20,boardplane[(sinput.r + minput.r) / 2][(sinput.c + minput.c) / 2].y+20));
                                       boardplane[(sinput.r + minput.r) / 2][(sinput.c + minput.c) / 2].kill();
                                   }

                               }
                               else if(minput.c-sinput.c==2&&minput.r-sinput.r==0){
                                   boardplane[sinput.r][sinput.c].image = images.m190
                                   boardplane[sinput.r][sinput.c].w=70
                                   boardplane[sinput.r][sinput.c].h=40

                                   boardplane[sinput.r][sinput.c].x+=1;

                                   if(boardplane[sinput.r][sinput.c].x==boardplane[(sinput.r+minput.r)/2][(sinput.c+minput.c)/2].x){
                                        canvases.push(new HTML5canvas(boardplane[(sinput.r + minput.r) / 2][(sinput.c + minput.c) / 2].x+20,boardplane[(sinput.r + minput.r) / 2][(sinput.c + minput.c) / 2].y+20));
                                       boardplane[(sinput.r + minput.r) / 2][(sinput.c + minput.c) / 2].kill();
                                   }

                               }
                               else if(minput.c-sinput.c==0&&minput.r-sinput.r==-2){

                                       boardplane[sinput.r][sinput.c].image = images.m1
                                       boardplane[sinput.r][sinput.c].w=40
                                       boardplane[sinput.r][sinput.c].h=70

                                       boardplane[sinput.r][sinput.c].y-=2;

                                       if(boardplane[sinput.r][sinput.c].y==boardplane[(sinput.r+minput.r)/2][(sinput.c+minput.c)/2].y){
                                            canvases.push(new HTML5canvas(boardplane[(sinput.r + minput.r) / 2][(sinput.c + minput.c) / 2].x+20,boardplane[(sinput.r + minput.r) / 2][(sinput.c + minput.c) / 2].y+20));
                                           boardplane[(sinput.r + minput.r) / 2][(sinput.c + minput.c) / 2].kill();
                                       }

                                   }

                           }

                       }
                    else if(whoseMove=="W")
                        {
                            if(board[minput.r][minput.c].id=="b"){
                                if(minput.c-sinput.c==1)
                                   {
                                       boardplane[sinput.r][sinput.c].image = images.p2_45
                                       boardplane[sinput.r][sinput.c].w=40
                                       boardplane[sinput.r][sinput.c].h=40

                                       boardplane[sinput.r][sinput.c].x+=2;
                                       boardplane[sinput.r][sinput.c].y+=2;
                                   }
                               else if(minput.c-sinput.c==-1)
                                   {
                                       boardplane[sinput.r][sinput.c].image = images.p245
                                       boardplane[sinput.r][sinput.c].w=40
                                       boardplane[sinput.r][sinput.c].h=40

                                       boardplane[sinput.r][sinput.c].x-=2;
                                       boardplane[sinput.r][sinput.c].y+=2;
                                   }
                                else if(minput.c-sinput.c==-2&&minput.r-sinput.r==0){
                                       boardplane[sinput.r][sinput.c].image = images.p2_90
                                       boardplane[sinput.r][sinput.c].w=50
                                       boardplane[sinput.r][sinput.c].h=50

                                       boardplane[sinput.r][sinput.c].x-=2;
                                    if(boardplane[sinput.r][sinput.c].x==boardplane[(sinput.r+minput.r)/2][(sinput.c+minput.c)/2].x && boardplane[sinput.r][sinput.c].y==boardplane[(sinput.r+minput.r)/2][(sinput.c+minput.c)/2].y){
                                        canvases.push(new HTML5canvas(boardplane[(sinput.r + minput.r) / 2][(sinput.c + minput.c) / 2].x+20,boardplane[(sinput.r + minput.r) / 2][(sinput.c + minput.c) / 2].y+20));
                                       boardplane[(sinput.r + minput.r) / 2][(sinput.c + minput.c) / 2].kill();
                                   }

                                   }
                                else if(minput.c-sinput.c==2&&minput.r-sinput.r==0){
                                       boardplane[sinput.r][sinput.c].image = images.p290
                                       boardplane[sinput.r][sinput.c].w=50
                                       boardplane[sinput.r][sinput.c].h=50

                                       boardplane[sinput.r][sinput.c].x+=2;
                                    if(boardplane[sinput.r][sinput.c].x==boardplane[(sinput.r+minput.r)/2][(sinput.c+minput.c)/2].x&& boardplane[sinput.r][sinput.c].y==boardplane[(sinput.r+minput.r)/2][(sinput.c+minput.c)/2].y){
                                        canvases.push(new HTML5canvas(boardplane[(sinput.r + minput.r) / 2][(sinput.c + minput.c) / 2].x+20,boardplane[(sinput.r + minput.r) / 2][(sinput.c + minput.c) / 2].y+20));
                                       boardplane[(sinput.r + minput.r) / 2][(sinput.c + minput.c) / 2].kill();
                                   }

                                   }
                                else if(minput.c-sinput.c==0&&minput.r-sinput.r==2){

                                       boardplane[sinput.r][sinput.c].image = images.p2
                                       boardplane[sinput.r][sinput.c].w=50
                                       boardplane[sinput.r][sinput.c].h=50

                                       boardplane[sinput.r][sinput.c].y+=2;

                                    if(boardplane[sinput.r][sinput.c].x==boardplane[(sinput.r+minput.r)/2][(sinput.c+minput.c)/2].x && boardplane[sinput.r][sinput.c].y==boardplane[(sinput.r+minput.r)/2][(sinput.c+minput.c)/2].y){
                                        canvases.push(new HTML5canvas(boardplane[(sinput.r + minput.r) / 2][(sinput.c + minput.c) / 2].x+20,boardplane[(sinput.r + minput.r) / 2][(sinput.c + minput.c) / 2].y+20));
                                       boardplane[(sinput.r + minput.r) / 2][(sinput.c + minput.c) / 2].kill();
                                   }

                                   }
                            }
                            else if(board[minput.r][minput.c].id=="B"){
                                if(minput.c-sinput.c==1 &&minput.r-sinput.r==1)
                                   {
                                       boardplane[sinput.r][sinput.c].image = images.m2_45
                                       boardplane[sinput.r][sinput.c].w=60
                                       boardplane[sinput.r][sinput.c].h=60

                                       boardplane[sinput.r][sinput.c].x+=2;
                                       boardplane[sinput.r][sinput.c].y+=2;
                                   }
                               else if(minput.c-sinput.c==-1 &&minput.r-sinput.r==1)
                                   {
                                       boardplane[sinput.r][sinput.c].image = images.m245
                                       boardplane[sinput.r][sinput.c].w=60
                                       boardplane[sinput.r][sinput.c].h=60

                                       boardplane[sinput.r][sinput.c].x-=2;
                                       boardplane[sinput.r][sinput.c].y+=2;
                                   }

                                else if(minput.c-sinput.c==1 &&minput.r-sinput.r==0)
                                   {
                                       boardplane[sinput.r][sinput.c].image = images.m290
                                       boardplane[sinput.r][sinput.c].w=70
                                       boardplane[sinput.r][sinput.c].h=40

                                       boardplane[sinput.r][sinput.c].x+=1;


                                   }
                                else if(minput.c-sinput.c==-1 &&minput.r-sinput.r==0)
                                   {
                                       boardplane[sinput.r][sinput.c].image = images.m2_90
                                       boardplane[sinput.r][sinput.c].w=70
                                       boardplane[sinput.r][sinput.c].h=40

                                       boardplane[sinput.r][sinput.c].x-=1;


                                   }
                                else if(minput.c-sinput.c==0 &&minput.r-sinput.r==1)
                                   {
                                       boardplane[sinput.r][sinput.c].image = images.m2
                                       boardplane[sinput.r][sinput.c].w=40
                                       boardplane[sinput.r][sinput.c].h=70

                                       boardplane[sinput.r][sinput.c].y+=2;


                                   }

                                else if(minput.c-sinput.c==-2&&minput.r-sinput.r==0){
                                       boardplane[sinput.r][sinput.c].image = images.m2_90
                                       boardplane[sinput.r][sinput.c].w=70
                                       boardplane[sinput.r][sinput.c].h=40

                                       boardplane[sinput.r][sinput.c].x-=1;

                                    if(boardplane[sinput.r][sinput.c].x==boardplane[(sinput.r+minput.r)/2][(sinput.c+minput.c)/2].x){
                                        canvases.push(new HTML5canvas(boardplane[(sinput.r + minput.r) / 2][(sinput.c + minput.c) / 2].x+20,boardplane[(sinput.r + minput.r) / 2][(sinput.c + minput.c) / 2].y+20));
                                       boardplane[(sinput.r + minput.r) / 2][(sinput.c + minput.c) / 2].kill();
                                   }

                                   }
                                else if(minput.c-sinput.c==2&&minput.r-sinput.r==0){
                                       boardplane[sinput.r][sinput.c].image = images.m290
                                       boardplane[sinput.r][sinput.c].w=70
                                       boardplane[sinput.r][sinput.c].h=40


                                       boardplane[sinput.r][sinput.c].x+=1;

                                    if(boardplane[sinput.r][sinput.c].x==boardplane[(sinput.r+minput.r)/2][(sinput.c+minput.c)/2].x){
                                        canvases.push(new HTML5canvas(boardplane[(sinput.r + minput.r) / 2][(sinput.c + minput.c) / 2].x+20,boardplane[(sinput.r + minput.r) / 2][(sinput.c + minput.c) / 2].y+20));
                                       boardplane[(sinput.r + minput.r) / 2][(sinput.c + minput.c) / 2].kill();
                                   }

                                   }
                                else if(minput.c-sinput.c==0&&minput.r-sinput.r==2){

                                       boardplane[sinput.r][sinput.c].image = images.m2
                                       boardplane[sinput.r][sinput.c].w=40
                                       boardplane[sinput.r][sinput.c].h=70

                                       boardplane[sinput.r][sinput.c].y+=2;

                                    if(boardplane[sinput.r][sinput.c].y==boardplane[(sinput.r+minput.r)/2][(sinput.c+minput.c)/2].y){
                                        canvases.push(new HTML5canvas(boardplane[(sinput.r + minput.r) / 2][(sinput.c + minput.c) / 2].x+20,boardplane[(sinput.r + minput.r) / 2][(sinput.c + minput.c) / 2].y+20));
                                       boardplane[(sinput.r + minput.r) / 2][(sinput.c + minput.c) / 2].kill();
                                   }

                                   }


                            }

                        }
                    if((boardplane[sinput.r][sinput.c].x==boardplane[minput.r][minput.c].x && sinput.c!=minput.c)||(boardplane[sinput.r][sinput.c].y==boardplane[minput.r][minput.c].y&& sinput.r!=minput.r)){
                        animateflag=0;
                        if(board[minput.r][minput.c].id=="w"){
                            boardplane[sinput.r][sinput.c].image = images.p1
                            boardplane[sinput.r][sinput.c].w=50
                            boardplane[sinput.r][sinput.c].h=50
                        }
                        else if(board[minput.r][minput.c].id=="b"){
                            boardplane[sinput.r][sinput.c].image = images.p2
                            boardplane[sinput.r][sinput.c].w=50
                            boardplane[sinput.r][sinput.c].h=50
                        }
                        else if(board[minput.r][minput.c].id=="W"){
                            boardplane[sinput.r][sinput.c].image = images.m1
                            boardplane[sinput.r][sinput.c].w=40
                            boardplane[sinput.r][sinput.c].h=70
                        }
                        else if(board[minput.r][minput.c].id=="B"){
                            boardplane[sinput.r][sinput.c].image = images.m2
                            boardplane[sinput.r][sinput.c].w=40
                            boardplane[sinput.r][sinput.c].h=70
                        }



                        var x1=boardplane[minput.r][minput.c].x;
                        var y1=boardplane[minput.r][minput.c].y;
                        var temp1= boardplane[sinput.r][sinput.c]
                        boardplane[sinput.r][sinput.c] = boardplane[minput.r][minput.c];
                        boardplane[minput.r][minput.c] = temp1;

                        //temp1 = boardplane[sinput.r][sinput.c].x;
                        //boardplane[sinput.r][sinput.c].x = boardplane[minput.r][minput.c].x;
                        boardplane[minput.r][minput.c].x = x1;

                        //temp1 = boardplane[sinput.r][sinput.c].y;
                        //boardplane[sinput.r][sinput.c].y = boardplane[minput.r][minput.c].y;
                        boardplane[minput.r][minput.c].y = y1;

                        boardplane[sinput.r][sinput.c].x=ix;
                        boardplane[sinput.r][sinput.c].y=iy;

                        if((board[minput.r][minput.c].id=="W"||board[minput.r][minput.c].id=="B")&&eliminateflag==0 ){
                            console.log("here")
                            boardplane[minput.r][minput.c].x+=basem;
                            boardplane[minput.r][minput.c].y-=10;
                            boardplane[sinput.r][sinput.c].x-=basem;
                            boardplane[sinput.r][sinput.c].y+=10;

                        }

                        if((board[(minput.r+sinput.r)/2][(minput.c+sinput.c)/2].id=="W"||board[(minput.r+sinput.r)/2][(minput.c+sinput.c)/2].id=="B")&&eliminateflag==1 ){
                            console.log("here")
                            boardplane[(minput.r+sinput.r)/2][(minput.c+sinput.c)/2].x+=basem;
                            boardplane[(minput.r+sinput.r)/2][(minput.c+sinput.c)/2].y-=10;


                        }


                        resetColor();
                        /*
                        if(whoseMove=="B")
                            document.getElementById("status").innerHTML = "Sentinel's turn (Blue) :";
                        else if(whoseMove=="W")
                            document.getElementById("status").innerHTML = "Scourge's turn (Red) :";
                            
                        */



                    }



                    /*

                    if(gameoverflag==1 && board[minput.r][minout.c].id=="B"){
                        boardplane[minput.r][minput.c].y+=2;
                    }
                    else if(gameoverflag==1 && board[minput.r][minout.c].id=="W"){
                        boardplane[minput.r][minput.c].y-=2;
                    }
                    */

             }


                c.clearRect(0,0,800,800);
                drawnumberrow();
                drawnumbercol();
                contextplane.clearRect(0,0,620,600);
                drawBoard();
                print();



                }
            me.repaint = function () {
                me.doPaint = true;
            };
            me.addObject = function (obj) {
                me.objects.push(obj);
            }
        }

        function CloudParticle() {
            var me = this;
            me.opacity = 10;
            me.color = 'rgba(236,240,241,0.1)';
            me.reset = function () {
                me.wind = RandomFloat(1);
                me.speed =Random(4)-2 ;
                me.radius = 100;
                me.location = { x:0, y: Random(window.innerHeight) };
            };
            me.reset();
            var image = new Image();
            image.src = "water.png";
            image.onload = function () {
                me.backgroundImage = image;
            }
            me.move = function () {
                if (me.location.x > window.innerWidth || me.location.x < 0 || me.location.y > window.innerHeight) {
                    me.reset();
                }

                me.location.x += me.wind/2;
                me.location.y += me.speed/2;
            };
            me.paint = function (context) {
                me.move();
                context.beginPath();
                context.arc(me.location.x, me.location.y, me.radius, 0, 2 * Math.PI, false);
                context.fillStyle = me.color;
                context.globalAlpha = me.opacity / 255;
                context.fill();
                context.closePath();
            };
        }
        function Random(range) {
            return Math.floor((Math.random() * range) + 1);
        }
        function RandomFloat(range) {
            return (Math.random() * range) + 1;
        }
        var viewport = new Viewport();
        for (var i = 0; i < 30; i++) {
            var cloud = new CloudParticle();
            viewport.addObject(cloud);
        }

          /*


        const rad = Math.PI / 180;
        let canvases = [];
        let colors = [
          "#6A0000",
          "#900000",
          "#902B2B",
          "#A63232",
          "#A62626",
          "#FD5039",
          "#C12F2A",
          "#FF6540",
          "#f93801"
        ];
        const spring = 1 / 10;
        const friction = 0.85;

        const canvasWidth = (canvasHeight = 100);
        const particlesNumber = 25;// change this
        //const canvasesNumber = 24;// and this


        class HTML5canvas {
          constructor(i) {
            //this.i = i;
            this.particles = [];


          }


            runExplosion(){
                console.log("Ban gaya")
                this.createElements();
                this.createParticles();
                this.explosionDraw();
                //eliminateflag=0;
            }


          createElements() {
            //this.div = document.createElement("div");

            this.canv = document.getElementById("explosion");
            this.ctx = this.canv.getContext("2d");
            this.canv.style="visibility:visible";
            //this.cw = this.canv.width = canvasWidth;
            //this.ch = this.canv.height = canvasHeight;

            //this.div.appendChild(this.canv);
            //wrapper.appendChild(this.div);
          }
          createParticles() {
            this.particles.length = 0;
            for (let i = 0; i < particlesNumber; i++) {
              this.particles.push(new Particle());
            }
          }
          explosionUpdate() {
            if (this.particles.length > 0) {
              for (let i = 0; i < this.particles.length; i++) {
                this.particles[i].update();
                if (this.particles[i].r < 0.5) {
                  this.particles.splice(i, 1);
                }
              }
            }
          }

          explosionDraw() {
            if (this.particles.length > 0) {
              this.ctx.clearRect(0, 0, this.cw, this.ch);
              this.ctx.globalCompositeOperation = "lighter";
              for (let i = 0; i < this.particles.length; i++) {
                this.particles[i].draw(this.ctx);
              }
            }
          }
        }

        class Particle {
          constructor() {
            this.decay = 0.95;
            //////////// Change this ///////////////
            this.r = randomIntFromInterval(5, 35);
            this.R = 40 - this.r;
            ////////////////////////////////////////
            this.angle = Math.random() * 2 * Math.PI;
            this.center = { x: canvasWidth / 2, y: canvasHeight / 2 };
            this.pos = {};
            this.pos.x = this.center.x + this.r * Math.cos(this.angle);
            this.pos.y = this.center.y + this.r * Math.sin(this.angle);
            this.target = {};
            this.target.x = this.center.x + this.R * Math.cos(this.angle);
            this.target.y = this.center.y + this.R * Math.sin(this.angle);
            this.color = colors[~~(Math.random() * colors.length)];
            this.vel = {
              x: 0,
              y: 0
            };
            this.acc = {
              x: 0,
              y: 0
            };
          }

          update() {
            let dx = this.target.x - this.pos.x;
            let dy = this.target.y - this.pos.y;

            this.acc.x = dx * spring;
            this.acc.y = dy * spring;
            this.vel.x += this.acc.x;
            this.vel.y += this.acc.y;

            this.vel.x *= friction;
            this.vel.y *= friction;

            this.pos.x += this.vel.x;
            this.pos.y += this.vel.y;

            if (this.r > 0) this.r *= this.decay;
          }

          draw(ctx) {
            ctx.fillStyle = this.color;
            ctx.beginPath();
            ctx.arc(this.pos.x, this.pos.y, this.r, 0, 2 * Math.PI);
            ctx.fill();
          }
        }

        for (let i = 0; i < 1; i++) {
          canvases.push(new HTML5canvas(i));
        }

        function Draw() {
          //requestId = window.requestAnimationFrame(Draw);

          for (let j = 0; j < canvases.length; j++) {
            let c = canvases[j];
            c.explosionUpdate();
            c.explosionDraw();
          }
        }
        Draw();

        function randomIntFromInterval(mn, mx) {
          return Math.floor(Math.random() * (mx - mn + 1) + mn);
        }

           */



         const rad = Math.PI / 180;
    let canvases = [];
    let colors = [
      "#6A0000",
      "#900000",
      "#902B2B",
      "#A63232",
      "#A62626",
      "#FD5039",
      "#C12F2A",
      "#FF6540",
      "#f93801"
    ];
    const spring = 1 / 10;
    const friction = 0.85;

    const canvasWidth = 620;
    const canvasHeight = 600;
    const particlesNumber = 25;// change this
    const canvasesNumber = 1;// and this

    class HTML5canvas {
      constructor(x,y) {
        //this.i = i;
        this.particles = [];

        this.createElements();

          this.createParticles(x,y);
        this.explosionDraw();





      }




      createElements() {
        //this.div = document.createElement("div");

        this.canv = document.getElementById("explosion");
        this.ctx = this.canv.getContext("2d");
        this.cw = this.canv.width = canvasWidth;
        this.ch = this.canv.height = canvasHeight;
        //this.canv.style.marginTop = x.toString()+"px"

        //this.div.appendChild(this.canv);
        //wrapper.appendChild(this.div);
      }
      createParticles(x,y) {
        this.particles.length = 0;
        for (let i = 0; i < particlesNumber; i++) {
          this.particles.push(new Particle(x,y));
        }
      }
      explosionUpdate() {
        if (this.particles.length > 0) {
          for (let i = 0; i < this.particles.length; i++) {
            this.particles[i].update();
            if (this.particles[i].r < 0.5) {
              this.particles.splice(i, 1);
            }
          }
        }
      }

      explosionDraw() {
        if (this.particles.length > 0) {
          this.ctx.clearRect(0, 0, this.cw, this.ch);
          this.ctx.globalCompositeOperation = "lighter";
          for (let i = 0; i < this.particles.length; i++) {
            this.particles[i].draw(this.ctx);
          }
        }
      }
    }

    class Particle {
      constructor(x1,y1) {
        this.decay = 0.95;
        //////////// Change this ///////////////
        this.r = randomIntFromInterval(5, 35);
        this.R = 40 - this.r;
        ////////////////////////////////////////
        this.angle = Math.random() * 2 * Math.PI;
        this.center = {x: x1,y:y1};//{ x: canvasWidth / 2, y: canvasHeight / 2 };
        this.pos = {};
        this.pos.x = this.center.x + this.r * Math.cos(this.angle);
        this.pos.y = this.center.y + this.r * Math.sin(this.angle);
        this.target = {};
        this.target.x = this.center.x + this.R * Math.cos(this.angle);
        this.target.y = this.center.y + this.R * Math.sin(this.angle);
        this.color = colors[~~(Math.random() * colors.length)];
        this.vel = {
          x: 0,
          y: 0
        };
        this.acc = {
          x: 0,
          y: 0
        };
      }

      update() {
        let dx = this.target.x - this.pos.x;
        let dy = this.target.y - this.pos.y;

        this.acc.x = dx * spring;
        this.acc.y = dy * spring;
        this.vel.x += this.acc.x;
        this.vel.y += this.acc.y;

        this.vel.x *= friction;
        this.vel.y *= friction;

        this.pos.x += this.vel.x;
        this.pos.y += this.vel.y;

        if (this.r > 0) this.r *= this.decay;
      }

      draw(ctx) {
        ctx.fillStyle = this.color;
        ctx.beginPath();
        ctx.arc(this.pos.x, this.pos.y, this.r, 0, 2 * Math.PI);
        ctx.fill();
      }
    }



    function Draw() {
      requestId = window.requestAnimationFrame(Draw);

      for (let j = 0; j < canvases.length; j++) {
        let c = canvases[j];
        c.explosionUpdate();
        c.explosionDraw();
      }
    }
Draw();

    function randomIntFromInterval(mn, mx) {
      return Math.floor(Math.random() * (mx - mn + 1) + mn);
    }


    //var btn = document.getElementById("explode")
    //btn.addEventListener("click", () => {




   // });






          function animate(){
            requestAnimationFrame(animate);
             viewport.init();

            }
            animate();















    });







    </script>

      <!-- Core -->
  <script src="{% static 'assets/vendor/jquery/jquery.min.js' %}"></script>
  <script src="{% static 'assets/vendor/popper/popper.min.js' %}"></script>
  <script src="{% static 'assets/vendor/bootstrap/bootstrap.min.js' %}"></script>
  <script src="{% static 'assets/vendor/headroom/headroom.min.js' %}"></script>
  <!-- Optional JS -->
  <script src="{% static 'assets/vendor/onscreen/onscreen.min.js' %}"></script>
  <script src="{% static 'assets/vendor/nouislider/js/nouislider.min.js' %}"></script>
  <script src="{% static 'assets/vendor/bootstrap-datepicker/js/bootstrap-datepicker.min.js' %}"></script>
  <!-- Argon JS -->
  <script src="{% static 'assets/js/argon.js' %}"></script>



      </body>
</html>
